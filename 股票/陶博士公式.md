# 陶博士公式

我的新姨太的寻找方向，次新+月线反转，次新+接近一年新高

## RPS

* 上市一年以上公司
    条件选股公式：BARSCOUNT(C)>N; N为参数，一般设为250

* EXTRS 用来计算股票涨跌幅
    技术指标公式：EXTRS:(C-REF(C,N))/REF(C,N);N缺省值为250。


* 建立扩展数据，对股票涨幅进行排序。
    * 计算品种为“自定义板块”下面的“上市一年以上”这个板块
    * 计算时段为本地所有数据
    * 勾选“精确复权”及“生成横向排名数据”
    * 排名方法为“0-1000归一化顺序”
    * 计算参数为120（对应半年期的RPS）
    * 计算参数为250（对应一年期的RPS）
    * 计算参数为50（对应一季期的RPS）


* RPS 股价相对强度
    技术指标

```
X:=EXTDATA_USER(1,0);{120天的}
RPS120:X/10,LINETHICK2,COLORGREEN;
IF(RPS120>=M,RPS120,DRAWNULL),LINETHICK2,COLORRED;

Y:=EXTDATA_USER(2,0);{250天的}
RPS250:Y/10,LINETHICK2,COLORWHITE;
IF(RPS250>=M,RPS250,DRAWNULL),LINETHICK2,COLORRED;
```
 
* RPS 选股公式
    选股公式器里 -> 综合选股 -> 技术指标选股 -> 其他类型 -> RPS（条件设置选择RPS250大于87）


## 月线反转5.0

月线反转5.0版本的技术指标公式的几个条件是：
1. 日线收盘价站上年线；
2. 一月内曾创50日新高；
3. 50日的RPS大于85；
4. 收盘价站上年线的天数大于2，小于30；
5. 最高价距离120日内的最高价不到10%；


技术指标公式

```
MA10:MA(CLOSE,10);
MA20:MA(CLOSE,20);
MA50:MA(CLOSE,50);
MA120:MA(CLOSE,120);
MA250:MA(CLOSE,250);

Z:=EXTDATA_USER(3,0);{50天的}
RPS50:=Z/10;

D:=IF(RPS50<=85,0,1);{RPS50大于85}
A:=C/MA(C,250)>1;{站上年线}
NH:=IF(H<HHV(H,50),0,1);
B:=COUNT(NH,30);{一月内曾创50日新高}

NN:=IF(C>MA(C,250),1,0);
AA:=COUNT(NN,30);
AB:=HIGH/HHV(HIGH,120)>0.9;{最高价距离120日内的最高价不到10%}

DRAWICON(BARSSINCEN((A AND B AND D AND  AA>2  AND AA<30 AND AB),30)=0,LOW,34);{30天内第一次满足月线反转的信号时，将在该日k线下方画表情34}

````

月线反转5.0版本的条件选股公式的源代码如下

```
Z:=EXTDATA_USER(3,0);{50天的}
RPS50:=Z/10;

D:=IF(RPS50<=85,0,1);{RPS50大于85}

A:=C/MA(C,250)>1;{站上年线}

NH:=IF(H<HHV(H,50),0,1);

B:=COUNT(NH,30);{一月内曾创50日新高}

NN:=IF(C>MA(C,250),1,0);

AA:=COUNT(NN,30);

AB:=HIGH/HHV(HIGH,120)>0.9;{最高价距离120日内的最高价不到10%}

A  AND  B  AND  D  AND  AA>2  AND  AA<30  AND  AB;{选出刚刚站上年线小于30天，大于2天的};
```

## 次新股
TOTALBARSCOUNT < N AND TOTALBARSCOUNT > N2;
N： 900
N2：60

## 接近一年新高

CLOSE/HHV(HIGH,250)>0.9;